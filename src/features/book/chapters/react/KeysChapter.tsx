import { CodeBlock } from '@/shared/ui/codeBlock/CodeBlock.tsx';
import { BookHashLink } from '../BookHashLink.tsx';
import styles from '../../Book.module.css';

export default function KeysChapter() {
  return (
    <>
      <nav className={styles.toc}>
        <BookHashLink id="why-keys">–ó–∞—á–µ–º –≤–æ–æ–±—â–µ –Ω—É–∂–Ω—ã keys</BookHashLink>
        <BookHashLink id="change-keys">–°–º–µ–Ω–∞ –∫–ª—é—á–∞</BookHashLink>
      </nav>

      <p>
        –û, <b>–∫–ª—é—á–∏ (keys) –≤ React</b> ‚Äî —ç—Ç–æ –º–∞–ª–µ–Ω—å–∫–∞—è —à—Ç—É–∫–∞, –∫–æ—Ç–æ—Ä–∞—è —Ä–µ—à–∞–µ—Ç –æ—á–µ–Ω—å –±–æ–ª—å—à—É—é –ø—Ä–æ–±–ª–µ–º—É
        üòÑ –ë–µ–∑ –Ω–∏—Ö React –Ω–∞—á–∏–Ω–∞–µ—Ç –ø—É—Ç–∞—Ç—å—Å—è, —á—Ç–æ <i>–∏–º–µ–Ω–Ω–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å</i> –≤ —Å–ø–∏—Å–∫–∞—Ö.
      </p>

      <hr />

      <h2 id="why-keys">–ó–∞—á–µ–º –≤–æ–æ–±—â–µ –Ω—É–∂–Ω—ã keys</h2>
      <p>
        –ö–æ–≥–¥–∞ —Ç—ã —Ä–µ–Ω–¥–µ—Ä–∏—à—å <b>—Å–ø–∏—Å–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤</b>, React –¥–æ–ª–∂–µ–Ω –ø–æ–Ω—è—Ç—å:
      </p>
      <ul>
        <li>
          –∫–∞–∫–æ–π —ç–ª–µ–º–µ–Ω—Ç <b>–¥–æ–±–∞–≤–∏–ª—Å—è</b>
        </li>
        <li>
          –∫–∞–∫–æ–π <b>—É–¥–∞–ª–∏–ª—Å—è</b>
        </li>
        <li>
          –∫–∞–∫–æ–π <b>–ø–µ—Ä–µ–º–µ—Å—Ç–∏–ª—Å—è</b>
        </li>
        <li>
          –∞ –∫–∞–∫–æ–π –ø—Ä–æ—Å—Ç–æ <b>–æ–±–Ω–æ–≤–∏–ª—Å—è</b>
        </li>
      </ul>
      <p>
        üëâ <b>key ‚Äî —ç—Ç–æ —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —ç–ª–µ–º–µ–Ω—Ç–∞</b>, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É React —Å–æ–ø–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å—Ç–∞—Ä—ã–π
        –∏ –Ω–æ–≤—ã–π virtual DOM.
      </p>
      <hr />
      <CodeBlock
        code={`const users = [
  { id: 1, name: '–í–∞—Å—è' },
  { id: 2, name: '–ü–µ—Ç—è' },
]

function UserList() {
  return (
    <ul>
      {users.map(user => (
        <li key={user.id}>
          {user.name}
        </li>
      ))}
    </ul>
  )
}`}
      />
      <p>
        ‚úÖ <code>key=user.id</code> ‚Äî –∏–¥–µ–∞–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç
      </p>
      <hr />
      <h2 id="change-keys">–°–º–µ–Ω–∞ –∫–ª—é—á–∞</h2>
      <p>
        üîë –ï—Å–ª–∏ <code>key</code> —É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –º–µ–Ω—è–µ—Ç—Å—è ‚Äî React —Å—á–∏—Ç–∞–µ—Ç –µ–≥–æ –Ω–æ–≤—ã–º
      </p>
      <ul>
        <li>
          —Å—Ç–∞—Ä—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç <b>unmount</b>
        </li>
        <li>
          –Ω–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç <b>mount</b>
        </li>
        <li>
          –≤—Å—ë —Å–æ—Å—Ç–æ—è–Ω–∏–µ (<code>useState</code>, <code>useRef</code>) ‚Üí ‚ùå <b>—Å–±—Ä–æ—Å</b>
        </li>
        <li>
          —ç—Ñ—Ñ–µ–∫—Ç—ã ‚Üí cleanup ‚Üí –∑–∞–Ω–æ–≤–æ <code>useEffect</code>
        </li>
      </ul>
      <hr />
      <h3>‚ùì –í–æ–ø—Ä–æ—Å, –∫–æ—Ç–æ—Ä—ã–π —Å—Ç–æ–∏—Ç –∑–∞–¥–∞—Ç—å —Å–µ–±–µ:</h3>
      <blockquote>¬´–Ø —Ö–æ—á—É –æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π?¬ª</blockquote>
      <ul>
        <li>
          <b>–û–±–Ω–æ–≤–∏—Ç—å</b> ‚Üí –º–µ–Ω—è–π props / state
        </li>
        <li>
          <b>–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π</b> ‚Üí –º–µ–Ω—è–π <code>key</code>
        </li>
      </ul>
      <hr />
      <h3>1. –°–±—Ä–æ—Å —Ñ–æ—Ä–º—ã / –∏–Ω–ø—É—Ç–æ–≤</h3>
      <CodeBlock code="<Form key={formId} />" />
      <p>
        –ê–Ω–∞–ª–æ–≥ <code>reset()</code>, –Ω–æ –Ω–∞ —É—Ä–æ–≤–Ω–µ React.
      </p>
      <hr />
      <h3>2. –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫ / —ç–∫—Ä–∞–Ω–æ–≤</h3>
      <CodeBlock code="<TabContent key={activeTab} />" />
      <p>–ö–∞–∂–¥–∞—è –≤–∫–ª–∞–¥–∫–∞:</p>
      <ul>
        <li>–æ—Ç–¥–µ–ª—å–Ω–∞—è ¬´–∂–∏–∑–Ω—å¬ª</li>
        <li>–æ—Ç–¥–µ–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ</li>
      </ul>
      <hr />
      <h3>3. –ß–∞—Ç—ã, —Ä–µ–¥–∞–∫—Ç–æ—Ä—ã, —Å–ª–æ–∂–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã</h3>
      <CodeBlock code="<Chat key={chatId} />" />
      <p>–ß—Ç–æ–±—ã:</p>
      <ul>
        <li>–Ω–µ —Ç–∞—â–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ—à–ª–æ–≥–æ —á–∞—Ç–∞</li>
        <li>–Ω–µ –ª–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–Ω—ã–µ –±–∞–≥–∏ —Å —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏</li>
      </ul>
      <hr />
      <h3>4. –ë–∞–≥–∏ —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫ üòÖ</h3>
      <CodeBlock code="<DatePicker key={locale} locale={locale} />" />
      <p>–ò–Ω–æ–≥–¥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç:</p>
      <ul>
        <li>–ø–ª–æ—Ö–æ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ prop changes</li>
        <li>—Ö—Ä–∞–Ω–∏—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ</li>
      </ul>
    </>
  );
}
